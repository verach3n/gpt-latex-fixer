# GPT Markdown Fixer

A toolkit for fixing Markdown files generated by ChatGPT/GPT Deep Research mode, including LaTeX formula conversion and citation repair.

## Tools

### 1. LaTeX Formula Converter (`latexconvert.c`)

A lightweight C utility to convert LaTeX formula delimiters in Markdown files, making ChatGPT/AI-generated mathematical formulas display correctly in standard Markdown renderers.

#### Problem

ChatGPT and other AI models often output LaTeX formulas using `\( \)` for inline math and `\[ \]` for block math. However, many Markdown renderers (GitHub, VSCode, Obsidian, etc.) expect `$ $` and `$$ $$` syntax instead.

#### Solution

| From | To | Type |
|------|-----|------|
| `\(` ... `\)` | `$` ... `$` | Inline math |
| `\[` ... `\]` | `$$` ... `$$` | Block math |
| `\*` | `*` | Remove unnecessary escape |

#### Building

```bash
gcc -o latexconvert latexconvert.c
```

#### Usage

```bash
# Basic usage (outputs to output.md)
./latexconvert input.md

# Specify output file
./latexconvert input.md converted.md
```

---

### 2. Citation Fixer (`fix_citations.py`)

Repairs broken citation formats in Markdown files generated by GPT Deep Research mode.

#### Problem

GPT Deep Research mode outputs citations in an internal encoded format like `citeturn14search0turn25view0`, which is completely unreadable and loses all actual reference information (titles, URLs).

#### Solution

This tool:
1. Extracts the complete reference list from the companion PDF file
2. Converts broken citation markers to clickable superscript links
3. Appends a formatted reference section at the end of the document

#### Conversion Example

**Before (unreadable):**
```
...normalization. citeturn14search0turn25view0turn22view0
```

**After (clickable links):**
```
...normalization. <sup>[[1]](https://arxiv.org/...)</sup><sup>[[2]](https://...)</sup>
```

#### Requirements

```bash
pip install pymupdf
```

#### Usage

```bash
# Basic usage (requires gpt.pdf in the same directory)
python3 fix_citations.py input.md

# Specify PDF and output file
python3 fix_citations.py input.md reference.pdf output.md
```

---

## Complete Workflow

To process a GPT Deep Research mode document:

```bash
# Step 1: Fix citations (requires companion PDF)
python3 fix_citations.py deep-research-report.md gpt.pdf temp.md

# Step 2: Convert LaTeX formula delimiters
./latexconvert temp.md final_output.md
```

---

## Example (LaTeX Conversion)

**Input:**
```markdown
The quadratic formula is \( x = \frac{-b \pm \sqrt{b^2-4ac}}{2a} \).

Euler's identity:
\[
e^{i\pi} + 1 = 0
\]
```

**Output:**
```markdown
The quadratic formula is $ x = \frac{-b \pm \sqrt{b^2-4ac}}{2a} $.

Euler's identity:
$$
e^{i\pi} + 1 = 0
$$
```

---

## Files

- `latexconvert.c` - LaTeX formula converter (C source)
- `fix_citations.py` - Citation fixer (Python script)

## Dependencies

- **latexconvert**: None (pure C)
- **fix_citations.py**: Python 3, PyMuPDF

## Credits

- **Original Author:** @147258369-haowen (May 30, 2024)
- **Citation Fixer:** Added in 2026

## License

MIT
